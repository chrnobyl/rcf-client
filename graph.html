<html>
<head>
<title>Popular Complaints</title>
<script type="text/javascript" src="http://static.fusioncharts.com/code/latest/fusioncharts.js"></script>
<script type="text/javascript" src="http://static.fusioncharts.com/code/latest/themes/fusioncharts.theme.fint.js?cacheBust=56"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>
  var chartData
  $.ajax({
    url: 'http://localhost:3000/api/v1/complaints/grouped',
    success : function(data){
        readyChart(data)
      }
    })
    function readyChart(chartData){
    FusionCharts.ready(function(){
      var fusioncharts = new FusionCharts({
        type: 'pie2d',
        renderAt: 'chart-container',
        width: '450',
        height: '300',
        dataFormat: 'json',
        dataSource: {
            "chart": {
                "caption": "Popular DHMH Complaints",
                "subCaption": "2017",
                "numberPrefix": "",
                "showPercentInTooltip": "1",
                "decimals": "1",
                "useDataPlotColorForLabels": "1",
                //Theme
                "theme": "fint"
              },
            "data": chartData
          }
      })
      fusioncharts.render();
    })
  }
</script>
</head>
<body>
  <div id="chart-container">FusionCharts XT will load here!</div>
</body>
</html>
